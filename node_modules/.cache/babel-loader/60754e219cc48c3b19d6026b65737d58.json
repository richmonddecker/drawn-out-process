{"ast":null,"code":"var sketch = function sketch(p) {\n  var radius = 0;\n  var lastMillis = 0;\n  var settings = {\n    numSides: 11\n  };\n\n  function clearPolygon(n) {\n    p.background(0.3);\n    drawPolygon(n);\n  }\n\n  p.setup = function () {\n    radius = p.min(window.innerWidth, window.innerHeight) / 2;\n    p.createCanvas(2 * radius, 2 * radius);\n    p.colorMode(p.HSB, 1);\n    clearPolygon(settings.numSides);\n  };\n\n  p.draw = function () {\n    var ellapsed = getEllapsedTime();\n    var coords = getCoords(); //let settings = getSettings();\n\n    if (shouldDraw()) {\n      makeLines(coords, settings, ellapsed);\n    }\n\n    drawPolygon(settings.numSides);\n  };\n\n  p.interpretProps = function (_ref) {\n    var controls = _ref.controls;\n    console.log(\"SETTINGS NOW: \");\n  };\n\n  function drawPolygon(n) {\n    p.push();\n    p.translate(radius, radius);\n    p.rotate(-p.PI / 2);\n    p.noStroke();\n    p.fill(1);\n    p.beginShape();\n    var angle;\n\n    if (n % 2) {\n      for (var i = 0; i < n; i++) {\n        angle = p.TWO_PI * i / n;\n        p.vertex(radius * p.cos(angle), radius * p.sin(angle));\n      }\n    }\n\n    p.endShape(p.CLOSE);\n    p.pop();\n  }\n\n  function getCoords() {\n    var x = p.mouseX - p.width / 2;\n    var y = p.mouseY - p.height / 2;\n    return {\n      x: x,\n      y: y,\n      r: p.sqrt(p.sq(x) + p.sq(y)),\n      th: p.PI + p.atan2(y, x)\n    };\n  }\n\n  function getColor(coords, settings) {\n    if (coords.r > radius) {\n      return p.color(0, 0, 0, 1);\n    }\n\n    var h = (settings.hueCycles * (coords.th / p.TWO_PI + 1.75) + 1 + settings.hueOffset / 360.0) % 1.0;\n    var s = p.pow(coords.r / radius, 1.0 / settings.colorPower);\n    var b = 0.5 + 0.5 * p.pow(coords.r / radius, 1.0 / settings.colorPower);\n    var a = settings.lineOpacity / 100.0;\n    return p.color(h, s, b, a);\n  }\n\n  function getAngleSpan(coords, settings) {\n    return p.PI * p.pow((radius - coords.r) / radius, settings.spanPower);\n  }\n\n  function getEllapsedTime() {\n    var nextMillis = p.millis();\n    var ellapsed = nextMillis - lastMillis;\n    lastMillis = nextMillis;\n    return ellapsed / 1000.0;\n  }\n\n  function getNumLines(settings, ellapsed) {\n    var factor = ellapsed * settings.lineSpeed;\n    var numLines = p.floor(factor);\n\n    if (p.random(0, 1) < factor % 1) {\n      numLines += 1;\n    }\n\n    return numLines;\n  }\n\n  function drawLine(span) {\n    p.push();\n    p.rotate(p.random(-span / 2, span / 2));\n    p.line(0, -2 * radius, 0, 2 * radius);\n    p.pop();\n  }\n\n  function makeLines(coords, settings, ellapsed) {\n    if (coords.r > radius) {\n      return;\n    }\n\n    var numLines = getNumLines(settings, ellapsed);\n    var span = getAngleSpan(coords, settings);\n    p.push();\n    p.translate(coords.x + p.width / 2, coords.y + p.height / 2);\n    p.rotate(coords.th);\n    p.strokeWeight(settings.lineThickness);\n    p.stroke(getColor(coords, settings));\n\n    for (var i = 0; i < numLines; i++) {\n      drawLine(span);\n    }\n\n    p.pop();\n  }\n\n  function shouldDraw() {\n    return !p.isBlocked && p.mouseIsPressed;\n  }\n};\n\nexport default sketch;","map":{"version":3,"sources":["/Users/richmonddecker/Documents/DrawnOutProcess/drawn-out-process/src/sketches/polystrings.js"],"names":["sketch","p","radius","lastMillis","settings","numSides","clearPolygon","n","background","drawPolygon","setup","min","window","innerWidth","innerHeight","createCanvas","colorMode","HSB","draw","ellapsed","getEllapsedTime","coords","getCoords","shouldDraw","makeLines","interpretProps","controls","console","log","push","translate","rotate","PI","noStroke","fill","beginShape","angle","i","TWO_PI","vertex","cos","sin","endShape","CLOSE","pop","x","mouseX","width","y","mouseY","height","r","sqrt","sq","th","atan2","getColor","color","h","hueCycles","hueOffset","s","pow","colorPower","b","a","lineOpacity","getAngleSpan","spanPower","nextMillis","millis","getNumLines","factor","lineSpeed","numLines","floor","random","drawLine","span","line","strokeWeight","lineThickness","stroke","isBlocked","mouseIsPressed"],"mappings":"AAAA,IAAMA,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AACpB,MAAIC,MAAM,GAAG,CAAb;AACA,MAAIC,UAAU,GAAG,CAAjB;AACA,MAAIC,QAAQ,GAAG;AACbC,IAAAA,QAAQ,EAAE;AADG,GAAf;;AAIA,WAASC,YAAT,CAAsBC,CAAtB,EAAyB;AACvBN,IAAAA,CAAC,CAACO,UAAF,CAAa,GAAb;AACAC,IAAAA,WAAW,CAACF,CAAD,CAAX;AACD;;AAEDN,EAAAA,CAAC,CAACS,KAAF,GAAU,YAAW;AACnBR,IAAAA,MAAM,GAAGD,CAAC,CAACU,GAAF,CAAMC,MAAM,CAACC,UAAb,EAAyBD,MAAM,CAACE,WAAhC,IAA+C,CAAxD;AACAb,IAAAA,CAAC,CAACc,YAAF,CAAe,IAAIb,MAAnB,EAA2B,IAAIA,MAA/B;AACAD,IAAAA,CAAC,CAACe,SAAF,CAAYf,CAAC,CAACgB,GAAd,EAAmB,CAAnB;AACAX,IAAAA,YAAY,CAACF,QAAQ,CAACC,QAAV,CAAZ;AACD,GALD;;AAOAJ,EAAAA,CAAC,CAACiB,IAAF,GAAS,YAAW;AAClB,QAAIC,QAAQ,GAAGC,eAAe,EAA9B;AACA,QAAIC,MAAM,GAAGC,SAAS,EAAtB,CAFkB,CAGlB;;AACA,QAAIC,UAAU,EAAd,EAAkB;AAChBC,MAAAA,SAAS,CAACH,MAAD,EAASjB,QAAT,EAAmBe,QAAnB,CAAT;AACD;;AACDV,IAAAA,WAAW,CAACL,QAAQ,CAACC,QAAV,CAAX;AACD,GARD;;AAUAJ,EAAAA,CAAC,CAACwB,cAAF,GAAmB,gBAAuB;AAAA,QAAZC,QAAY,QAAZA,QAAY;AACxCC,IAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD,GAFD;;AAIA,WAASnB,WAAT,CAAqBF,CAArB,EAAwB;AACtBN,IAAAA,CAAC,CAAC4B,IAAF;AACA5B,IAAAA,CAAC,CAAC6B,SAAF,CAAY5B,MAAZ,EAAoBA,MAApB;AACAD,IAAAA,CAAC,CAAC8B,MAAF,CAAS,CAAC9B,CAAC,CAAC+B,EAAH,GAAQ,CAAjB;AACA/B,IAAAA,CAAC,CAACgC,QAAF;AACAhC,IAAAA,CAAC,CAACiC,IAAF,CAAO,CAAP;AACAjC,IAAAA,CAAC,CAACkC,UAAF;AACA,QAAIC,KAAJ;;AACA,QAAI7B,CAAC,GAAG,CAAR,EAAW;AACT,WAAK,IAAI8B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG9B,CAApB,EAAuB8B,CAAC,EAAxB,EAA4B;AAC1BD,QAAAA,KAAK,GAAGnC,CAAC,CAACqC,MAAF,GAAWD,CAAX,GAAe9B,CAAvB;AACAN,QAAAA,CAAC,CAACsC,MAAF,CAASrC,MAAM,GAAGD,CAAC,CAACuC,GAAF,CAAMJ,KAAN,CAAlB,EAAgClC,MAAM,GAAGD,CAAC,CAACwC,GAAF,CAAML,KAAN,CAAzC;AACD;AACF;;AACDnC,IAAAA,CAAC,CAACyC,QAAF,CAAWzC,CAAC,CAAC0C,KAAb;AACA1C,IAAAA,CAAC,CAAC2C,GAAF;AACD;;AAED,WAAStB,SAAT,GAAqB;AACnB,QAAIuB,CAAC,GAAG5C,CAAC,CAAC6C,MAAF,GAAW7C,CAAC,CAAC8C,KAAF,GAAQ,CAA3B;AACA,QAAIC,CAAC,GAAG/C,CAAC,CAACgD,MAAF,GAAWhD,CAAC,CAACiD,MAAF,GAAS,CAA5B;AACA,WAAO;AACLL,MAAAA,CAAC,EAAEA,CADE;AAELG,MAAAA,CAAC,EAAEA,CAFE;AAGLG,MAAAA,CAAC,EAAElD,CAAC,CAACmD,IAAF,CAAOnD,CAAC,CAACoD,EAAF,CAAKR,CAAL,IAAU5C,CAAC,CAACoD,EAAF,CAAKL,CAAL,CAAjB,CAHE;AAILM,MAAAA,EAAE,EAAErD,CAAC,CAAC+B,EAAF,GAAO/B,CAAC,CAACsD,KAAF,CAAQP,CAAR,EAAWH,CAAX;AAJN,KAAP;AAMD;;AAED,WAASW,QAAT,CAAkBnC,MAAlB,EAA0BjB,QAA1B,EAAoC;AAClC,QAAIiB,MAAM,CAAC8B,CAAP,GAAWjD,MAAf,EAAuB;AACrB,aAAOD,CAAC,CAACwD,KAAF,CAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAP;AACD;;AACD,QAAIC,CAAC,GAAG,CAACtD,QAAQ,CAACuD,SAAT,IAAsBtC,MAAM,CAACiC,EAAP,GAAYrD,CAAC,CAACqC,MAAd,GAAuB,IAA7C,IAAqD,CAArD,GAAyDlC,QAAQ,CAACwD,SAAT,GAAqB,KAA/E,IAAwF,GAAhG;AACA,QAAIC,CAAC,GAAG5D,CAAC,CAAC6D,GAAF,CAAMzC,MAAM,CAAC8B,CAAP,GAAWjD,MAAjB,EAAyB,MAAME,QAAQ,CAAC2D,UAAxC,CAAR;AACA,QAAIC,CAAC,GAAI,MAAM,MAAM/D,CAAC,CAAC6D,GAAF,CAAMzC,MAAM,CAAC8B,CAAP,GAAWjD,MAAjB,EAAyB,MAAME,QAAQ,CAAC2D,UAAxC,CAArB;AACA,QAAIE,CAAC,GAAG7D,QAAQ,CAAC8D,WAAT,GAAuB,KAA/B;AACA,WAAOjE,CAAC,CAACwD,KAAF,CAAQC,CAAR,EAAWG,CAAX,EAAcG,CAAd,EAAiBC,CAAjB,CAAP;AACD;;AAED,WAASE,YAAT,CAAsB9C,MAAtB,EAA8BjB,QAA9B,EAAwC;AACtC,WAAOH,CAAC,CAAC+B,EAAF,GAAO/B,CAAC,CAAC6D,GAAF,CAAM,CAAC5D,MAAM,GAAGmB,MAAM,CAAC8B,CAAjB,IAAsBjD,MAA5B,EAAoCE,QAAQ,CAACgE,SAA7C,CAAd;AACD;;AAED,WAAShD,eAAT,GAA2B;AACzB,QAAIiD,UAAU,GAAGpE,CAAC,CAACqE,MAAF,EAAjB;AACA,QAAInD,QAAQ,GAAGkD,UAAU,GAAGlE,UAA5B;AACAA,IAAAA,UAAU,GAAGkE,UAAb;AACA,WAAOlD,QAAQ,GAAG,MAAlB;AACD;;AAED,WAASoD,WAAT,CAAqBnE,QAArB,EAA+Be,QAA/B,EAAyC;AACvC,QAAIqD,MAAM,GAAGrD,QAAQ,GAAGf,QAAQ,CAACqE,SAAjC;AACA,QAAIC,QAAQ,GAAGzE,CAAC,CAAC0E,KAAF,CAAQH,MAAR,CAAf;;AACA,QAAIvE,CAAC,CAAC2E,MAAF,CAAS,CAAT,EAAY,CAAZ,IAAiBJ,MAAM,GAAG,CAA9B,EAAiC;AAC/BE,MAAAA,QAAQ,IAAI,CAAZ;AACD;;AACD,WAAOA,QAAP;AACD;;AAED,WAASG,QAAT,CAAkBC,IAAlB,EAAwB;AACtB7E,IAAAA,CAAC,CAAC4B,IAAF;AACA5B,IAAAA,CAAC,CAAC8B,MAAF,CAAS9B,CAAC,CAAC2E,MAAF,CAAS,CAACE,IAAD,GAAM,CAAf,EAAkBA,IAAI,GAAC,CAAvB,CAAT;AACA7E,IAAAA,CAAC,CAAC8E,IAAF,CAAO,CAAP,EAAU,CAAC,CAAD,GAAK7E,MAAf,EAAuB,CAAvB,EAA0B,IAAIA,MAA9B;AACAD,IAAAA,CAAC,CAAC2C,GAAF;AACD;;AAED,WAASpB,SAAT,CAAmBH,MAAnB,EAA2BjB,QAA3B,EAAqCe,QAArC,EAA+C;AAC7C,QAAIE,MAAM,CAAC8B,CAAP,GAAWjD,MAAf,EAAuB;AACrB;AACD;;AACD,QAAIwE,QAAQ,GAAGH,WAAW,CAACnE,QAAD,EAAWe,QAAX,CAA1B;AACA,QAAI2D,IAAI,GAAGX,YAAY,CAAC9C,MAAD,EAASjB,QAAT,CAAvB;AACAH,IAAAA,CAAC,CAAC4B,IAAF;AACA5B,IAAAA,CAAC,CAAC6B,SAAF,CAAYT,MAAM,CAACwB,CAAP,GAAW5C,CAAC,CAAC8C,KAAF,GAAQ,CAA/B,EAAkC1B,MAAM,CAAC2B,CAAP,GAAW/C,CAAC,CAACiD,MAAF,GAAS,CAAtD;AACAjD,IAAAA,CAAC,CAAC8B,MAAF,CAASV,MAAM,CAACiC,EAAhB;AACArD,IAAAA,CAAC,CAAC+E,YAAF,CAAe5E,QAAQ,CAAC6E,aAAxB;AACAhF,IAAAA,CAAC,CAACiF,MAAF,CAAS1B,QAAQ,CAACnC,MAAD,EAASjB,QAAT,CAAjB;;AACA,SAAK,IAAIiC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqC,QAApB,EAA8BrC,CAAC,EAA/B,EAAmC;AACjCwC,MAAAA,QAAQ,CAACC,IAAD,CAAR;AACD;;AACD7E,IAAAA,CAAC,CAAC2C,GAAF;AACD;;AAED,WAASrB,UAAT,GAAsB;AACpB,WAAO,CAACtB,CAAC,CAACkF,SAAH,IAAgBlF,CAAC,CAACmF,cAAzB;AACD;AACF,CAxHD;;AA0HA,eAAepF,MAAf","sourcesContent":["const sketch = (p) => {\n  let radius = 0;\n  let lastMillis = 0;\n  let settings = {\n    numSides: 11\n  }\n\n  function clearPolygon(n) {\n    p.background(0.3);\n    drawPolygon(n);\n  }\n\n  p.setup = function() {\n    radius = p.min(window.innerWidth, window.innerHeight) / 2;\n    p.createCanvas(2 * radius, 2 * radius);\n    p.colorMode(p.HSB, 1);\n    clearPolygon(settings.numSides);\n  }\n\n  p.draw = function() {\n    let ellapsed = getEllapsedTime();\n    let coords = getCoords();\n    //let settings = getSettings();\n    if (shouldDraw()) {\n      makeLines(coords, settings, ellapsed);\n    }\n    drawPolygon(settings.numSides);\n  }\n\n  p.interpretProps = function({ controls }) {\n    console.log(\"SETTINGS NOW: \")\n  }\n\n  function drawPolygon(n) {\n    p.push();\n    p.translate(radius, radius);\n    p.rotate(-p.PI / 2);\n    p.noStroke();\n    p.fill(1);\n    p.beginShape();\n    let angle;\n    if (n % 2) {\n      for (let i = 0; i < n; i++) {\n        angle = p.TWO_PI * i / n;\n        p.vertex(radius * p.cos(angle), radius * p.sin(angle));\n      }\n    }\n    p.endShape(p.CLOSE);\n    p.pop();\n  }\n\n  function getCoords() {\n    let x = p.mouseX - p.width/2;\n    let y = p.mouseY - p.height/2;\n    return {\n      x: x,\n      y: y,\n      r: p.sqrt(p.sq(x) + p.sq(y)),\n      th: p.PI + p.atan2(y, x)\n    };\n  }\n\n  function getColor(coords, settings) {\n    if (coords.r > radius) {\n      return p.color(0, 0, 0, 1);\n    }\n    let h = (settings.hueCycles * (coords.th / p.TWO_PI + 1.75) + 1 + settings.hueOffset / 360.0) % 1.0\n    let s = p.pow(coords.r / radius, 1.0 / settings.colorPower);\n    let b = (0.5 + 0.5 * p.pow(coords.r / radius, 1.0 / settings.colorPower));\n    let a = settings.lineOpacity / 100.0;\n    return p.color(h, s, b, a);\n  }\n\n  function getAngleSpan(coords, settings) {\n    return p.PI * p.pow((radius - coords.r) / radius, settings.spanPower);\n  }\n\n  function getEllapsedTime() {\n    let nextMillis = p.millis();\n    let ellapsed = nextMillis - lastMillis;\n    lastMillis = nextMillis;\n    return ellapsed / 1000.0;\n  }\n\n  function getNumLines(settings, ellapsed) {\n    let factor = ellapsed * settings.lineSpeed;\n    let numLines = p.floor(factor);\n    if (p.random(0, 1) < factor % 1) {\n      numLines += 1;\n    }\n    return numLines;\n  }\n\n  function drawLine(span) {\n    p.push();\n    p.rotate(p.random(-span/2, span/2));\n    p.line(0, -2 * radius, 0, 2 * radius);\n    p.pop();\n  }\n\n  function makeLines(coords, settings, ellapsed) {\n    if (coords.r > radius) {\n      return;\n    }\n    let numLines = getNumLines(settings, ellapsed);\n    let span = getAngleSpan(coords, settings);\n    p.push();\n    p.translate(coords.x + p.width/2, coords.y + p.height/2);\n    p.rotate(coords.th);\n    p.strokeWeight(settings.lineThickness);\n    p.stroke(getColor(coords, settings));\n    for (let i = 0; i < numLines; i++) {\n      drawLine(span);\n    }\n    p.pop();\n  }\n\n  function shouldDraw() {\n    return !p.isBlocked && p.mouseIsPressed;\n  }\n};\n\nexport default sketch;\n"]},"metadata":{},"sourceType":"module"}